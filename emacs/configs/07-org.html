<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Knowledge Management</title>
<meta name="generator" content="Org Mode" />
<meta name="viewport" content="width=device-width, initial-scale=1"><script src="https://cdn.tailwindcss.com?plugins=typography"></script><script>window.tailwind = window.tailwind || {};window.tailwind.config = { darkMode: 'media' }; /* follow browser */</script>
<style>
  :root { color-scheme: light dark; }      /* hint to UA widgets, form controls */
  body { margin:0; }
  @media (prefers-color-scheme: light) { body { background: #ffffff; } }
  @media (prefers-color-scheme: dark)  { body { background: #0b0b0b; } }
</style><link rel="stylesheet" href="/assets/styles/toc-sidebar.css"><script src="/assets/scripts/toc-sidebar.js" defer></script>
</head>
<body>
<main id="content" class="prose prose-zinc dark:prose-invert mx-auto w-full max-w-xl md:max-w-xl lg:max-w-2xl xl:max-w-3xl px-4 sm:px-6 lg:px-8">
<h1 class="title">Knowledge Management</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orge231981">1. Org Mode Core Configuration</a></li>
<li><a href="#orga4cf3a3">2. Org Download</a></li>
<li><a href="#org7955a86">3. Org Appear (Disabled)</a></li>
<li><a href="#org7cf526f">4. Org Google Calendar</a></li>
<li><a href="#orgab6487e">5. Org Remote Images</a></li>
<li><a href="#orga6d62b8">6. Org-Roam Configuration</a>
<ul>
<li><a href="#org11a3dbe">6.1. Core Setup</a></li>
<li><a href="#org4305839">6.2. Capture Templates</a></li>
<li><a href="#orgaff762a">6.3. Daily Notes Configuration</a></li>
<li><a href="#org1493c3f">6.4. Enhanced Node Display</a></li>
<li><a href="#orgc561522">6.5. Graph Visualization</a></li>
<li><a href="#orge8c0c43">6.6. UI Enhancement with org-roam-ui</a></li>
<li><a href="#orgfd06c26">6.7. Performance Optimizations</a></li>
<li><a href="#org17db810">6.8. Best Practices Summary</a></li>
<li><a href="#orgbf36e2e">6.9. Common Workflows</a></li>
</ul>
</li>
<li><a href="#org80286e9">7. Remote Access Setup</a>
<ul>
<li><a href="#org4759cd3">7.1. Overview of Remote Access Approaches</a></li>
<li><a href="#org1b42419">7.2. AWS EC2 / VPS Setup Guide</a></li>
<li><a href="#orgc71c3f5">7.3. Fast SSH Access with Mosh</a></li>
<li><a href="#orgea61317">7.4. org-roam-ui for Mobile Web Access</a></li>
<li><a href="#orgf5299d7">7.5. iOS Quick Capture Setup</a></li>
<li><a href="#orgc389e73">7.6. Git Sync Workflow</a></li>
<li><a href="#org5a7a028">7.7. Backup Strategy</a></li>
<li><a href="#org44d8773">7.8. Daily Workflow Examples</a></li>
<li><a href="#org253e866">7.9. Troubleshooting</a></li>
<li><a href="#org9d9a380">7.10. Cost Estimation</a></li>
<li><a href="#org3c0c616">7.11. Comparison to Notion/Obsidian</a></li>
<li><a href="#org7097c9d">7.12. References and Resources</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Configuration for Org-mode and knowledge management tools including org-roam, org-gcal, and related packages.
</p>

<div id="outline-container-orge231981" class="outline-2">
<h2 id="orge231981"><span class="section-number-2">1.</span> Org Mode Core Configuration</h2>
<div class="outline-text-2" id="text-1">
<p>
Core Org-mode settings including babel languages, templates, and basic customization.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">org-conf.el --- Org-mode and knowledge management configuration  -*- lexical-binding: t; -*-
</span><span class="org-comment-delimiter">;;; </span><span class="org-comment">Commentary:
</span><span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:
</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Configure browser for opening URLs (fixes LaTeXiT issue on macOS)
</span>(<span class="org-keyword">setq</span> browse-url-browser-function 'browse-url-default-macosx-browser)

<span class="org-comment-delimiter">;; </span><span class="org-comment">Required packages for org extensions
</span>(<span class="org-keyword">use-package</span> org-contrib)
(<span class="org-keyword">use-package</span> ob-typescript)
(<span class="org-keyword">use-package</span> ob-powershell)
(<span class="org-keyword">use-package</span> ob-http)
(<span class="org-keyword">use-package</span> ob-restclient)

(<span class="org-keyword">use-package</span> org
  <span class="org-builtin">:pin</span> org
  <span class="org-builtin">:commands</span> (org-capture org-agenda)
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Agenda and logging
</span>  (org-agenda-start-with-log-mode t)
  (org-log-done 'time)
  (org-log-into-drawer t)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Editing behavior
</span>  (org-catch-invisible-edits 'show)
  (org-edit-timestamp-down-means-later t)
  (org-fast-tag-selection-single-key 'expert)
  (org-src-window-setup 'current-window)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Export settings
</span>  (org-export-coding-system 'utf-8)
  (org-export-kill-product-buffer-when-displayed t)
  (org-html-validation-link nil)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">LaTeX export
</span>  (org-latex-compiler <span class="org-string">"xelatex"</span>)
  (org-latex-pdf-process '(<span class="org-string">"latexmk -xelatex -synctex=1 -f -interaction=nonstopmode -output-directory=%o %f"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Display and appearance
</span>  (org-hide-emphasis-markers t)
  (org-pretty-entities nil)
  (org-startup-indented nil)
  (org-startup-with-inline-images t)
  (org-display-remote-inline-images 'download)
  (org-image-actual-width '(450))
  (org-tags-column 80)

  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Load org-tempo for easy template expansion
</span>  (<span class="org-keyword">require</span> '<span class="org-constant">org-tempo</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Load babel language support
</span>  (<span class="org-keyword">require</span> '<span class="org-constant">ob-js</span>)
  (<span class="org-keyword">require</span> '<span class="org-constant">ob-typescript</span>)
  (<span class="org-keyword">require</span> '<span class="org-constant">ob-ruby</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Add custom structure templates
</span>  (add-to-list 'org-structure-template-alist '(<span class="org-string">"txt"</span>  . <span class="org-string">"src text"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"cc"</span>   . <span class="org-string">"src C"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"sh"</span>   . <span class="org-string">"src shell"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"zsh"</span>  . <span class="org-string">"src zsh"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"bash"</span> . <span class="org-string">"src bash"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"posh"</span> . <span class="org-string">"src powershell"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"el"</span>   . <span class="org-string">"src emacs-lisp"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"py"</span>   . <span class="org-string">"src python"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"js"</span>   . <span class="org-string">"src js"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"ts"</span>   . <span class="org-string">"src typescript"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"java"</span> . <span class="org-string">"src java"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"scm"</span>  . <span class="org-string">"src scheme"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"sql"</span>  . <span class="org-string">"src sql"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"rust"</span> . <span class="org-string">"src rust"</span>))
  (add-to-list 'org-structure-template-alist '(<span class="org-string">"rb"</span>   . <span class="org-string">"src ruby"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable babel languages - only load those that are available
</span>  (org-babel-do-load-languages
   'org-babel-load-languages
   (seq-filter
    (<span class="org-keyword">lambda</span> (pair)
      (locate-library (concat <span class="org-string">"ob-"</span> (symbol-name (car pair)))))
    '((dot        . t)
      (C          . t)
      (gnuplot    . t)
      (latex      . t)
      (python     . t)
      (js         . t)
      (typescript . t)
      (shell      . t)
      (zsh        . t)
      (bash       . t)
      (posh       . t)
      (powershell . t)
      (scheme     . t)
      (sql        . t)
      (sqlite     . t)
      (ruby       . t)
      (emacs-lisp . t)
      (http       . t)
      (restclient . t))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Fix electric-pair-mode for org-mode angle brackets
</span>  (<span class="org-keyword">defun</span> <span class="org-function-name">handle-electric-pair-inhibit</span> (c)
    (<span class="org-keyword">if</span> (char-equal c ?&lt;) t (,electric-pair-inhibit-predicate c)))

  (<span class="org-keyword">defun</span> <span class="org-function-name">handle-org-mode-hook</span>()
    (<span class="org-keyword">setq-local</span> electric-pair-inhibit-predicate #'handle-electric-pair-inhibit))

  (add-hook 'org-mode-hook #'handle-org-mode-hook)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Load org-remoteimg for remote image display
</span>  (add-to-list 'load-path (expand-file-name <span class="org-string">"elisp/settings"</span> user-emacs-directory))
  (<span class="org-keyword">require</span> '<span class="org-constant">org-remoteimg</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4cf3a3" class="outline-2">
<h2 id="orga4cf3a3"><span class="section-number-2">2.</span> Org Download</h2>
<div class="outline-text-2" id="text-2">
<p>
Drag-and-drop images and screenshots into org buffers.
Automatically skipped on server/headless environments (requires GUI for screenshots).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Skip org-download on server (requires GUI for screenshots)
</span>(<span class="org-keyword">unless</span> emacs-server-mode
  (<span class="org-keyword">use-package</span> org-download
    <span class="org-builtin">:after</span> org
    <span class="org-builtin">:custom</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Store images in a local "images" directory
</span>    (org-download-image-dir <span class="org-string">"images"</span>)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't create heading-based subdirectories
</span>    (org-download-heading-lvl nil)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Screenshot method based on OS
</span>    (org-download-screenshot-method
     (<span class="org-keyword">cond</span> ((eq system-type 'darwin) <span class="org-string">"screencapture -i %s"</span>)
           ((eq system-type 'gnu/linux) <span class="org-string">"scrot -s %s"</span>)))

    <span class="org-builtin">:config</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable inline display of remote images
</span>    (<span class="org-keyword">setq</span> org-download-display-inline-images 'posframe)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7955a86" class="outline-2">
<h2 id="org7955a86"><span class="section-number-2">3.</span> Org Appear (Disabled)</h2>
<div class="outline-text-2" id="text-3">
<p>
Shows hidden emphasis markers and links when cursor is on them. Currently disabled.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> org-appear
  <span class="org-builtin">:hook</span>
  (org-mode . org-appear-mode)
  <span class="org-builtin">:custom</span>
  (org-appear-autoemphasis t)
  (org-appear-autolinks t)
  (org-appear-autosubmarkers t)
  (org-appear-autoentities t)
  (org-appear-autokeywords t)
  (org-appear-inside-latex t)
  (org-appear-delay 0.0)
  (org-appear-trigger 'always))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7cf526f" class="outline-2">
<h2 id="org7cf526f"><span class="section-number-2">4.</span> Org Google Calendar</h2>
<div class="outline-text-2" id="text-4">
<p>
Bidirectional sync between Org-mode and Google Calendar.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> org-gcal
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">IMPORTANT: Set these variables in your private.el or custom-vars.el:
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq org-gcal-client-id "your-client-id-from-google-console.apps.googleusercontent.com")
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq org-gcal-client-secret "your-client-secret-from-google-console")
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq org-gcal-file-alist '(("your-email@gmail.com" . "~/org/gcal.org")
</span>  <span class="org-comment-delimiter">;;                              </span><span class="org-comment">("another-calendar@gmail.com" . "~/org/work-gcal.org")))
</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Directory to store OAuth token and sync metadata
</span>  (org-gcal-dir (expand-file-name <span class="org-string">".org-gcal/"</span> user-emacs-directory))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Token storage - use plain text file (no .gpg extension) to avoid encryption
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">The token file will have restricted file permissions (600) for security
</span>  (org-gcal-token-file (expand-file-name <span class="org-string">".org-gcal/token"</span> user-emacs-directory))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Automatically fetch events when opening org-agenda
</span>  (org-gcal-auto-archive nil)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Notify on sync
</span>  (org-gcal-notify-p t)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Update events if they already exist (bidirectional sync)
</span>  (org-gcal-update-cancelled-events-with-todo t)

  <span class="org-builtin">:init</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">CRITICAL: Disable plstore encryption BEFORE org-gcal loads
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">This must be in :init, not :config
</span>  (<span class="org-keyword">setq</span> plstore-cache-passphrase-for-symmetric-encryption t)
  (<span class="org-keyword">setq</span> plstore-encrypt-to nil)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Ensure EPG context doesn't prompt for passphrase
</span>  (<span class="org-keyword">setq</span> epg-pinentry-mode 'loopback)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Auto-provide a passphrase if encryption can't be disabled
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">This prevents repeated prompts
</span>  (<span class="org-keyword">defvar</span> <span class="org-variable-name">my/org-gcal-passphrase</span> <span class="org-string">"emacs-gcal-token"</span>)
  (<span class="org-keyword">defun</span> <span class="org-function-name">my/org-gcal-passphrase-callback</span> (context key-id handback)
    <span class="org-doc">"Automatically provide passphrase for org-gcal token encryption."</span>
    my/org-gcal-passphrase)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Override EPG passphrase callback
</span>  (<span class="org-keyword">setq</span> epg-passphrase-callback-function #'my/org-gcal-passphrase-callback)

  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Additional workaround: advice plstore to disable encryption
</span>  (<span class="org-keyword">when</span> (fboundp 'plstore-open)
    (advice-add 'plstore-open <span class="org-builtin">:around</span>
                (<span class="org-keyword">lambda</span> (orig-fun file)
                  (<span class="org-keyword">let</span> ((plstore-encrypt-to nil))
                    (funcall orig-fun file)))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Add org-gcal files to org-agenda-files if configured
</span>  (<span class="org-keyword">when</span> (<span class="org-keyword">and</span> (boundp 'org-gcal-file-alist) org-gcal-file-alist)
    (<span class="org-keyword">dolist</span> (calendar org-gcal-file-alist)
      (<span class="org-keyword">let</span> ((gcal-file (cdr calendar)))
        <span class="org-comment-delimiter">;; </span><span class="org-comment">Create the file if it doesn't exist
</span>        (<span class="org-keyword">unless</span> (file-exists-p gcal-file)
          (make-directory (file-name-directory gcal-file) t)
          (write-region <span class="org-string">""</span> nil gcal-file))
        <span class="org-comment-delimiter">;; </span><span class="org-comment">Add to org-agenda-files if not already there
</span>        (<span class="org-keyword">when</span> (<span class="org-keyword">and</span> (boundp 'org-agenda-files)
                   (not (member gcal-file org-agenda-files)))
          (add-to-list 'org-agenda-files gcal-file)))))

  <span class="org-builtin">:bind</span>
  ((<span class="org-string">"C-c g p"</span> . org-gcal-post-at-point)
   (<span class="org-string">"C-c g d"</span> . org-gcal-delete-at-point)
   (<span class="org-string">"C-c g r"</span> . org-gcal-refresh-token)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab6487e" class="outline-2">
<h2 id="orgab6487e"><span class="section-number-2">5.</span> Org Remote Images</h2>
<div class="outline-text-2" id="text-5">
<p>
Display remote HTTP/HTTPS images inline in org buffers with automatic caching.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">org-remoteimg.el --- Display remote inline images in org-mode -*- lexical-binding: t -*-
</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Copyright (C) 2023 Dean Gao - MIT License
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">Author: Dean Gao <a href="mailto:gao.dean%40hotmail.com">&lt;gao.dean@hotmail.com&gt;</a>
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">Description: Inline display of remote images in org-mode
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">Homepage: https://github.com/gaoDean/org-imgtog
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">Package-Requires: ((emacs "25.1"))
</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Permission is hereby granted, free of charge, to any person obtaining a copy
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">of this software and associated documentation files (the "Software"), to deal
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">in the Software without restriction, including without limitation the rights
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">copies of the Software, and to permit persons to whom the Software is
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">furnished to do so, subject to the following conditions:
</span><span class="org-comment-delimiter">;;</span><span class="org-comment">
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">The above copyright notice and this permission notice shall be included in all
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">copies or substantial portions of the Software.
</span><span class="org-comment-delimiter">;;</span><span class="org-comment">
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">SOFTWARE.
</span>
<span class="org-comment-delimiter">;;; </span><span class="org-comment">Commentary:
</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">This package displays remote images inline in org-mode with automatic caching.
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">This means you can do \[\[https://my-file.png\]\], and have it display inline.
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">The next time you visit the file or fetch the image, it will be instantly
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">fetched from the cache.
</span>
<span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:
</span>
(<span class="org-keyword">require</span> '<span class="org-constant">org</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">org-element</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">url</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">url-cache</span>)

(<span class="org-keyword">unless</span> (fboundp 'image-supported-file-p)
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">image-supported-file-p</span></span><span class="org-comment">' isn't available before Emacs 28
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">Add alias to not break Emacs &lt;28.
</span>  (<span class="org-keyword">defalias</span> '<span class="org-function-name">image-type-from-file-name</span> 'image-supported-file-p))

<span class="org-comment-delimiter">;; </span><span class="org-comment">Compatibility definitions for Org-mode &lt; 9.8
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">In Org &lt; 9.8, the variable is called org-inline-image-overlays
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">In Org &gt;= 9.8, it was renamed to org-link-preview-overlays
</span>(<span class="org-keyword">unless</span> (boundp 'org-link-preview-overlays)
  (<span class="org-keyword">defvaralias</span> '<span class="org-variable-name">org-link-preview-overlays</span> 'org-inline-image-overlays
    <span class="org-doc">"Compatibility alias for org-inline-image-overlays in Org &lt; 9.8."</span>))

(<span class="org-keyword">defun</span> <span class="org-function-name">org-image-update-overlay</span> (file link <span class="org-type">&amp;optional</span> data-p refresh)
  <span class="org-doc">"Create image overlay for FILE associtated with org-element LINK.
If DATA-P is non-nil FILE is not a file name but a string with the image data.
If REFRESH is non-nil don't download the file but refresh the image.
See also `</span><span class="org-doc"><span class="org-constant">create-image</span></span><span class="org-doc">'.
This function is almost a duplicate of a part of `</span><span class="org-doc"><span class="org-constant">org-display-inline-images</span></span><span class="org-doc">'."</span>
  (<span class="org-keyword">when</span> (<span class="org-keyword">or</span> data-p (file-exists-p file))
    (<span class="org-keyword">let</span> ((width
           <span class="org-comment-delimiter">;; </span><span class="org-comment">Apply `</span><span class="org-comment"><span class="org-constant">org-image-actual-width</span></span><span class="org-comment">' specifications.
</span>           (<span class="org-keyword">cond</span>
            ((eq org-image-actual-width t) nil)
            ((listp org-image-actual-width)
             (<span class="org-keyword">or</span>
              <span class="org-comment-delimiter">;; </span><span class="org-comment">First try to find a width among
</span>              <span class="org-comment-delimiter">;; </span><span class="org-comment">attributes associated to the paragraph
</span>              <span class="org-comment-delimiter">;; </span><span class="org-comment">containing link.
</span>              (<span class="org-keyword">let</span> ((paragraph
                     (<span class="org-keyword">let</span> ((e link))
                       (<span class="org-keyword">while</span> (<span class="org-keyword">and</span> (<span class="org-keyword">setq</span> e (org-element-property
                                            <span class="org-builtin">:parent</span> e))
                                   (not (eq (org-element-type e)
                                            'paragraph))))
                       e)))
                (<span class="org-keyword">when</span> paragraph
                  (<span class="org-keyword">save-excursion</span>
                    (goto-char (org-element-property <span class="org-builtin">:begin</span> paragraph))
                    (<span class="org-keyword">when</span>
                        (re-search-forward
                         <span class="org-string">"^[ \t]*#\\+attr_.*?: +.*?:width +</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">\\S-+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">"</span>
                         (org-element-property
                          <span class="org-builtin">:post-affiliated</span> paragraph)
                         t)
                      (string-to-number (match-string 1))))))
              <span class="org-comment-delimiter">;; </span><span class="org-comment">Otherwise, fall-back to provided number.
</span>              (car org-image-actual-width)))
            ((numberp org-image-actual-width)
             org-image-actual-width)))
          (old (get-char-property-and-overlay
                (org-element-property <span class="org-builtin">:begin</span> link)
                'org-image-overlay)))
      (<span class="org-keyword">if</span> (<span class="org-keyword">and</span> (car-safe old) refresh)
          (image-flush (overlay-get (cdr old) 'display))
        (<span class="org-keyword">let</span> ((image (create-image file
                                   (<span class="org-keyword">and</span> (image-type-available-p 'imagemagick)
                                        width
                                        'imagemagick)
                                   data-p
                                   <span class="org-builtin">:width</span> width)))
          (<span class="org-keyword">when</span> image
            (<span class="org-keyword">let*</span> ((link
                    <span class="org-comment-delimiter">;; </span><span class="org-comment">If inline image is the description
</span>                    <span class="org-comment-delimiter">;; </span><span class="org-comment">of another link, be sure to
</span>                    <span class="org-comment-delimiter">;; </span><span class="org-comment">consider the latter as the one to
</span>                    <span class="org-comment-delimiter">;; </span><span class="org-comment">apply the overlay on.
</span>                    (<span class="org-keyword">let</span> ((parent
                           (org-element-property <span class="org-builtin">:parent</span> link)))
                      (<span class="org-keyword">if</span> (eq (org-element-type parent) 'link)
                          parent
                        link)))
                   (ov (make-overlay
                        (org-element-property <span class="org-builtin">:begin</span> link)
                        (<span class="org-keyword">progn</span>
                          (goto-char
                           (org-element-property <span class="org-builtin">:end</span> link))
                          (skip-chars-backward <span class="org-string">" \t"</span>)
                          (point)))))
              (overlay-put ov 'display image)
              (overlay-put ov 'face 'default)
              (overlay-put ov 'org-image-overlay t)
              (overlay-put
               ov 'modification-hooks
               (list 'org-display-inline-remove-overlay))
              (<span class="org-keyword">push</span> ov org-link-preview-overlays)
              ov)))))))

(<span class="org-keyword">defun</span> <span class="org-function-name">org-display-user-inline-images</span> (<span class="org-type">&amp;optional</span> _include-linked _refresh beg end)
  <span class="org-doc">"Like `</span><span class="org-doc"><span class="org-constant">org-display-inline-images</span></span><span class="org-doc">' but for image data links.
_INCLUDE-LINKED and _REFRESH are ignored.
Restrict to region between BEG and END if both are non-nil.
Image data links have a :image-data-fun parameter.
\(See `</span><span class="org-doc"><span class="org-constant">org-link-set-parameters</span></span><span class="org-doc">'.)
The value of the :image-data-fun parameter is a function
taking the PROTOCOL, the LINK, and the DESCRIPTION as arguments.
If that function returns nil the link is not interpreted as image.
Otherwise the return value is the image data string to be displayed.

Note that only bracket links are allowed as image data links
with one of the formats
 [[PROTOCOL:LINK]]
or
 [[PROTOCOL:LINK][DESCRIPTION]]
are recognized.
Full credit goes to org-yt by Tobias Zawada for this function."</span>
  (<span class="org-keyword">interactive</span>)
  (<span class="org-keyword">when</span> (<span class="org-keyword">and</span> (called-interactively-p 'any)
             (use-region-p))
    (<span class="org-keyword">setq</span> beg (region-beginning)
          end (region-end)))
  (<span class="org-keyword">when</span> (display-graphic-p)
    (<span class="org-keyword">org-with-wide-buffer</span>
     (goto-char (<span class="org-keyword">or</span> beg (point-min)))
     (<span class="org-keyword">when-let*</span> ((image-data-link-parameters
               (<span class="org-keyword">cl-loop</span> for link-par-entry in org-link-parameters
                        with fun
                        when (<span class="org-keyword">setq</span> fun (plist-get (cdr link-par-entry) <span class="org-builtin">:image-data-fun</span>))
                        collect (cons (car link-par-entry) fun)))
              (image-data-link-re (regexp-opt (mapcar 'car image-data-link-parameters)))
              (re (format <span class="org-string">"\\[\\[</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">%s</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">:</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(?:</span></span><span class="org-string">\\[</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string">[</span><span class="org-string"><span class="org-negation-char">^</span></span><span class="org-string">]]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">\\]</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string">?\\]"</span>
                          image-data-link-re)))
       (<span class="org-keyword">while</span> (re-search-forward re end t)
         (<span class="org-keyword">let*</span> ((protocol (match-string-no-properties 1))
              (link (match-string-no-properties 2))
              (description (match-string-no-properties 3))
              (image-data-link (assoc-string protocol image-data-link-parameters))
              (el (<span class="org-keyword">save-excursion</span> (goto-char (match-beginning 1)) (org-element-context)))
              image-data)
           (<span class="org-keyword">when</span> el
             (<span class="org-keyword">setq</span> image-data
                   (<span class="org-keyword">or</span> (<span class="org-keyword">let</span> ((old (get-char-property-and-overlay
                                   (org-element-property <span class="org-builtin">:begin</span> el)
                                   'org-image-overlay)))
                         (<span class="org-keyword">and</span> old
                              (car-safe old)
                              (overlay-get (cdr old) 'display)))
                     (funcall (cdr image-data-link) protocol link description)))
             (<span class="org-keyword">when</span> image-data
               (<span class="org-keyword">let</span> ((ol (org-image-update-overlay image-data el t t)))
                 (<span class="org-keyword">when</span> (<span class="org-keyword">and</span> ol description)
                   (overlay-put ol 'after-string description)))))))))))

(<span class="org-keyword">defun</span> <span class="org-function-name">org-remoteimg--fetch-image</span> (protocol link _description)
  <span class="org-doc">"Synchronously retrieve image from cache or web."</span>
  (<span class="org-keyword">when</span> (<span class="org-keyword">and</span> (image-supported-file-p link)
             (not (eq org-display-remote-inline-images 'skip)))
    (<span class="org-keyword">let*</span> ((cache (eq org-display-remote-inline-images 'cache))
           (url-automatic-caching (<span class="org-keyword">if</span> cache
                                      t
                                    url-automatic-caching))
           (url (concat protocol <span class="org-string">":"</span> link))
           (silent-output (file-exists-p (url-cache-create-filename url))))
      (<span class="org-keyword">if-let*</span> ((buf (url-retrieve-synchronously url
                                                   silent-output
                                                   nil
                                                   30)))
              (<span class="org-keyword">with-current-buffer</span> buf
                (goto-char (point-min))
                (re-search-forward <span class="org-string">"\r?\n\r?\n"</span> nil t)
                (buffer-substring-no-properties (point) (point-max)))
            (<span class="org-warning">error</span> <span class="org-string">"Download of image \"%s\" failed"</span> link)
            nil))))

(<span class="org-keyword">defun</span> <span class="org-function-name">org-link-preview-http</span> (ov _path link)
  <span class="org-doc">"Generate preview OV for LINK in PATH."</span>
  (<span class="org-keyword">when-let*</span> ((raw-link (org-element-property <span class="org-builtin">:raw-link</span> link))
              (image-type (image-supported-file-p raw-link))
              <span class="org-comment-delimiter">;; </span><span class="org-comment">cache?
</span>              (image-buffer (org-remoteimg--fetch-image nil raw-link nil)))
        (overlay-put ov 'display (create-image image-buffer
                                      <span class="org-comment-delimiter">;; </span><span class="org-comment">scale?
</span>                                   <span class="org-comment-delimiter">;; </span><span class="org-comment">(and (image-type-available-p 'imagemagick)
</span>                                   <span class="org-comment-delimiter">;;      </span><span class="org-comment">width
</span>                                   <span class="org-comment-delimiter">;;      </span><span class="org-comment">'imagemagick)
</span>                                                             <span class="org-comment-delimiter">;; </span><span class="org-comment">:width width
</span>                                                             image-type
                                                             t))
        t))

(<span class="org-keyword">if</span> (fboundp 'org-display-inline-images)
    (<span class="org-keyword">progn</span>
      (advice-add #'org-display-inline-images <span class="org-builtin">:after</span> #'org-display-user-inline-images)
      (org-link-set-parameters <span class="org-string">"http"</span>  <span class="org-builtin">:image-data-fun</span> #'org-remoteimg--fetch-image)
      (org-link-set-parameters <span class="org-string">"https"</span> <span class="org-builtin">:image-data-fun</span> #'org-remoteimg--fetch-image))
  (org-link-set-parameters <span class="org-string">"http"</span> <span class="org-builtin">:preview</span> #'org-link-preview-http)
  (org-link-set-parameters <span class="org-string">"https"</span> <span class="org-builtin">:preview</span> #'org-link-preview-http))

(<span class="org-keyword">provide</span> '<span class="org-constant">org-remoteimg</span>)

<span class="org-comment-delimiter">;;; </span><span class="org-comment">org-remoteimg.el ends here
</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6d62b8" class="outline-2">
<h2 id="orga6d62b8"><span class="section-number-2">6.</span> Org-Roam Configuration</h2>
<div class="outline-text-2" id="text-6">
<p>
Org-roam is a powerful Zettelkasten-style note-taking system built on top of Org-mode. It enables networked thought through bidirectional linking and provides tools for knowledge management inspired by Roam Research.
</p>
</div>

<div id="outline-container-org11a3dbe" class="outline-3">
<h3 id="org11a3dbe"><span class="section-number-3">6.1.</span> Core Setup</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> org-roam
  <span class="org-builtin">:after</span> org
  <span class="org-builtin">:demand</span> t
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Directory where all your notes will be stored
</span>  (org-roam-directory (file-truename <span class="org-string">"~/org-roam/"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Better database location (avoid cluttering org-roam directory)
</span>  (org-roam-db-location (expand-file-name <span class="org-string">"org-roam.db"</span> user-emacs-directory))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable completion everywhere (for inserting links)
</span>  (org-roam-completion-everywhere t)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Configure how nodes are displayed in completion
</span>  (org-roam-node-display-template
   (concat <span class="org-string">"${title:*} "</span> (propertize <span class="org-string">"${tags:10}"</span> 'face 'org-tag)))

  <span class="org-builtin">:bind</span>
  ((<span class="org-string">"C-c n l"</span> . org-roam-buffer-toggle)         <span class="org-comment-delimiter">;; </span><span class="org-comment">Show backlinks sidebar
</span>   (<span class="org-string">"C-c n f"</span> . org-roam-node-find)             <span class="org-comment-delimiter">;; </span><span class="org-comment">Find or create a note
</span>   (<span class="org-string">"C-c n i"</span> . org-roam-node-insert)           <span class="org-comment-delimiter">;; </span><span class="org-comment">Insert a link to a note
</span>   (<span class="org-string">"C-c n c"</span> . org-roam-capture)               <span class="org-comment-delimiter">;; </span><span class="org-comment">Quick capture
</span>   (<span class="org-string">"C-c n j"</span> . org-roam-dailies-capture-today) <span class="org-comment-delimiter">;; </span><span class="org-comment">Daily note
</span>   (<span class="org-string">"C-c n g"</span> . org-roam-graph)                 <span class="org-comment-delimiter">;; </span><span class="org-comment">Visualize the graph
</span>   <span class="org-builtin">:map</span> org-mode-map
   (<span class="org-string">"C-M-i"</span>   . completion-at-point))           <span class="org-comment-delimiter">;; </span><span class="org-comment">Complete link at point
</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Initialize org-roam database and sync on startup
</span>  (org-roam-db-autosync-mode 1)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Ensure org-roam directory exists
</span>  (<span class="org-keyword">unless</span> (file-directory-p org-roam-directory)
    (make-directory org-roam-directory t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4305839" class="outline-3">
<h3 id="org4305839"><span class="section-number-3">6.2.</span> Capture Templates</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Define templates for different types of notes. This follows the best practice of having different note types (fleeting, permanent, literature, etc.).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> org-roam
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Capture templates for different note types
</span>  (org-roam-capture-templates
   '((<span class="org-string">"d"</span> <span class="org-string">"default"</span> plain
      <span class="org-string">"%?"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span>
                         <span class="org-string">"#+title: ${title}\n#+date: %U\n#+filetags: \n\n"</span>)
      <span class="org-builtin">:unnarrowed</span> t)

     (<span class="org-string">"p"</span> <span class="org-string">"permanent"</span> plain
      <span class="org-string">"* Source\n\n%?\n\n* Content\n\n\n* Links\n"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"permanent/%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span>
                         <span class="org-string">"#+title: ${title}\n#+date: %U\n#+filetags: :permanent:\n\n"</span>)
      <span class="org-builtin">:unnarrowed</span> t)

     (<span class="org-string">"l"</span> <span class="org-string">"literature"</span> plain
      <span class="org-string">"* Source\n\nAuthor: %^{Author}\nTitle: ${title}\nYear: %^{Year}\n\n%?\n\n* Summary\n\n\n* Key Points\n\n\n* Quotes\n\n\n* Related\n"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"literature/%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span>
                         <span class="org-string">"#+title: ${title}\n#+date: %U\n#+filetags: :literature:\n\n"</span>)
      <span class="org-builtin">:unnarrowed</span> t)

     (<span class="org-string">"c"</span> <span class="org-string">"concept"</span> plain
      <span class="org-string">"* Definition\n\n%?\n\n* Examples\n\n\n* Related Concepts\n"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"concepts/%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span>
                         <span class="org-string">"#+title: ${title}\n#+date: %U\n#+filetags: :concept:\n\n"</span>)
      <span class="org-builtin">:unnarrowed</span> t)

     (<span class="org-string">"r"</span> <span class="org-string">"reference"</span> plain
      <span class="org-string">"* %?\n"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"reference/%&lt;%Y%m%d%H%M%S&gt;-${slug}.org"</span>
                         <span class="org-string">"#+title: ${title}\n#+date: %U\n#+filetags: :reference:\n\n"</span>)
      <span class="org-builtin">:unnarrowed</span> t))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaff762a" class="outline-3">
<h3 id="orgaff762a"><span class="section-number-3">6.3.</span> Daily Notes Configuration</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Daily notes are essential for journaling and capturing fleeting thoughts. This configuration follows best practices for daily note organization.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> org-roam
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Store daily notes in a dedicated subdirectory
</span>  (org-roam-dailies-directory <span class="org-string">"daily/"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Capture templates for daily notes
</span>  (org-roam-dailies-capture-templates
   '((<span class="org-string">"d"</span> <span class="org-string">"default"</span> entry
      <span class="org-string">"* %&lt;%H:%M&gt; %?"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"%&lt;%Y-%m-%d&gt;.org"</span>
                         <span class="org-string">"#+title: %&lt;%Y-%m-%d (%A)&gt;\n#+filetags: :daily:\n\n"</span>))

     (<span class="org-string">"m"</span> <span class="org-string">"meeting"</span> entry
      <span class="org-string">"* %&lt;%H:%M&gt; Meeting: %^{Meeting Title}\n\n** Attendees\n%?\n\n** Notes\n\n\n** Action Items\n"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"%&lt;%Y-%m-%d&gt;.org"</span>
                         <span class="org-string">"#+title: %&lt;%Y-%m-%d (%A)&gt;\n#+filetags: :daily:\n\n"</span>))

     (<span class="org-string">"j"</span> <span class="org-string">"journal"</span> entry
      <span class="org-string">"* %&lt;%H:%M&gt; Journal\n\n%?"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"%&lt;%Y-%m-%d&gt;.org"</span>
                         <span class="org-string">"#+title: %&lt;%Y-%m-%d (%A)&gt;\n#+filetags: :daily:journal:\n\n"</span>))

     (<span class="org-string">"t"</span> <span class="org-string">"task"</span> entry
      <span class="org-string">"* TODO %?\n  SCHEDULED: %t\n"</span>
      <span class="org-builtin">:target</span> (file+head <span class="org-string">"%&lt;%Y-%m-%d&gt;.org"</span>
                         <span class="org-string">"#+title: %&lt;%Y-%m-%d (%A)&gt;\n#+filetags: :daily:\n\n"</span>))))

  <span class="org-builtin">:bind</span>
  ((<span class="org-string">"C-c n t"</span> . org-roam-dailies-goto-today)
   (<span class="org-string">"C-c n y"</span> . org-roam-dailies-goto-yesterday)
   (<span class="org-string">"C-c n d"</span> . org-roam-dailies-goto-date)
   (<span class="org-string">"C-c n n"</span> . org-roam-dailies-goto-next-note)
   (<span class="org-string">"C-c n p"</span> . org-roam-dailies-goto-previous-note)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1493c3f" class="outline-3">
<h3 id="org1493c3f"><span class="section-number-3">6.4.</span> Enhanced Node Display</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Customize how nodes appear in completion and searches for better usability.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> org-roam
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Custom function to display nodes with more context
</span>  (<span class="org-keyword">setq</span> org-roam-node-display-template
        (concat <span class="org-string">"${type:15} ${title:*} "</span> (propertize <span class="org-string">"${tags:20}"</span> 'face 'org-tag)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Add custom properties to node display
</span>  (<span class="org-keyword">cl-defmethod</span> <span class="org-function-name">org-roam-node-type</span> ((node org-roam-node))
    <span class="org-doc">"Return the TYPE of NODE based on tags or directory."</span>
    (<span class="org-keyword">let</span> ((tags (org-roam-node-tags node))
          (file (org-roam-node-file node)))
      (<span class="org-keyword">cond</span>
       ((member <span class="org-string">"permanent"</span> tags) <span class="org-string">"&#128221; Permanent"</span>)
       ((member <span class="org-string">"literature"</span> tags) <span class="org-string">"&#128218; Literature"</span>)
       ((member <span class="org-string">"concept"</span> tags) <span class="org-string">"&#128161; Concept"</span>)
       ((member <span class="org-string">"reference"</span> tags) <span class="org-string">"&#128214; Reference"</span>)
       ((member <span class="org-string">"daily"</span> tags) <span class="org-string">"&#128197; Daily"</span>)
       ((string-match-p <span class="org-string">"/daily/"</span> file) <span class="org-string">"&#128197; Daily"</span>)
       ((string-match-p <span class="org-string">"/literature/"</span> file) <span class="org-string">"&#128218; Literature"</span>)
       ((string-match-p <span class="org-string">"/permanent/"</span> file) <span class="org-string">"&#128221; Permanent"</span>)
       ((string-match-p <span class="org-string">"/concepts/"</span> file) <span class="org-string">"&#128161; Concept"</span>)
       (t <span class="org-string">"&#128196; Note"</span>)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc561522" class="outline-3">
<h3 id="orgc561522"><span class="section-number-3">6.5.</span> Graph Visualization</h3>
<div class="outline-text-3" id="text-6-5">
<p>
Configure org-roam's graph visualization for better insights into your knowledge network.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> org-roam
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Graphviz executable for generating graphs
</span>  (org-roam-graph-executable (executable-find <span class="org-string">"dot"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Exclude certain tags from the graph for cleaner visualization
</span>  (org-roam-graph-exclude-matcher '(<span class="org-string">"daily"</span> <span class="org-string">"fleeting"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Use specific program for graph generation
</span>  (org-roam-graph-viewer (executable-find <span class="org-string">"open"</span>))  <span class="org-comment-delimiter">;; </span><span class="org-comment">macOS
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">For Linux: (org-roam-graph-viewer "xdg-open")
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">For Windows: (org-roam-graph-viewer "start")
</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Additional graph settings
</span>  (org-roam-graph-extra-config
   '((<span class="org-string">"overlap"</span> . <span class="org-string">"false"</span>)
     (<span class="org-string">"splines"</span> . <span class="org-string">"true"</span>)
     (<span class="org-string">"rankdir"</span> . <span class="org-string">"LR"</span>))))  <span class="org-comment-delimiter">;; </span><span class="org-comment">Left to Right layout</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8c0c43" class="outline-3">
<h3 id="orge8c0c43"><span class="section-number-3">6.6.</span> UI Enhancement with org-roam-ui</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Optional web-based graph visualization interface (requires separate package).
Automatically skipped on server/headless environments.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Skip org-roam-ui on server (requires browser/GUI)
</span>(<span class="org-keyword">unless</span> emacs-server-mode
  (<span class="org-keyword">use-package</span> org-roam-ui
    <span class="org-builtin">:after</span> org-roam
    <span class="org-builtin">:custom</span>
    (org-roam-ui-sync-theme t)              <span class="org-comment-delimiter">;; </span><span class="org-comment">Sync with Emacs theme
</span>    (org-roam-ui-follow t)                  <span class="org-comment-delimiter">;; </span><span class="org-comment">Follow current note in UI
</span>    (org-roam-ui-update-on-save t)          <span class="org-comment-delimiter">;; </span><span class="org-comment">Update graph on save
</span>    (org-roam-ui-open-on-start t)           <span class="org-comment-delimiter">;; </span><span class="org-comment">Open browser when activated
</span>    (org-roam-ui-browser-function #'browse-url-default-browser)  <span class="org-comment-delimiter">;; </span><span class="org-comment">Use default browser
</span>    <span class="org-builtin">:bind</span>
    (<span class="org-string">"C-c n u"</span> . org-roam-ui-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd06c26" class="outline-3">
<h3 id="orgfd06c26"><span class="section-number-3">6.7.</span> Performance Optimizations</h3>
<div class="outline-text-3" id="text-6-7">
<p>
Best practices for maintaining good performance with large note collections.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span class="org-keyword">use-package</span> org-roam
    <span class="org-builtin">:custom</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Increase cache size for better performance
</span>    (org-roam-db-gc-threshold most-positive-fixnum)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Update database asynchronously
</span>    (org-roam-db-update-method 'immediate)

    <span class="org-builtin">:config</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Auto-save database periodically
</span>    (run-with-idle-timer 300 t #'org-roam-db-sync))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Helper function for safe note deletion
</span>  (<span class="org-keyword">defun</span> <span class="org-function-name">fu/org-roam-node-delete</span> (<span class="org-type">&amp;optional</span> node)
    <span class="org-doc">"Delete an org-roam NODE after showing backlinks warning.
If NODE is not provided, prompt to select a note from minibuffer.
If called from within a note, can use current note."</span>
    (<span class="org-keyword">interactive</span>)
    (<span class="org-keyword">let*</span> ((node (<span class="org-keyword">or</span> node
                     (<span class="org-keyword">if</span> (derived-mode-p 'org-mode)
                         <span class="org-comment-delimiter">;; </span><span class="org-comment">Try current node first, fall back to selection
</span>                         (<span class="org-keyword">or</span> (org-roam-node-at-point)
                             (org-roam-node-read))
                       <span class="org-comment-delimiter">;; </span><span class="org-comment">Not in org-mode, always prompt
</span>                       (org-roam-node-read))))
           (file (org-roam-node-file node))
           (title (org-roam-node-title node))
           (backlinks (org-roam-backlinks-get node))
           (buffer (find-buffer-visiting file)))
      (<span class="org-keyword">if</span> backlinks
          (<span class="org-keyword">progn</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">Open the file if not already open
</span>            (<span class="org-keyword">unless</span> buffer
              (find-file file))
            (org-roam-buffer-toggle)
            (message <span class="org-string">"WARNING: %d notes link to '</span><span class="org-string"><span class="org-constant">%s</span></span><span class="org-string">'! Check backlinks first."</span>
                     (length backlinks) title))
        (<span class="org-keyword">when</span> (yes-or-no-p (format <span class="org-string">"Delete '</span><span class="org-string"><span class="org-constant">%s</span></span><span class="org-string">'? "</span> title))
          (<span class="org-keyword">when</span> buffer (kill-buffer buffer))
          (delete-file file)
          (org-roam-db-sync)
          (message <span class="org-string">"Note '</span><span class="org-string"><span class="org-constant">%s</span></span><span class="org-string">' deleted and database synced."</span> title)))))

  (<span class="org-keyword">provide</span> '<span class="org-constant">org-conf</span>)
  <span class="org-comment-delimiter">;;; </span><span class="org-comment">org-conf.el ends here</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org17db810" class="outline-3">
<h3 id="org17db810"><span class="section-number-3">6.8.</span> Best Practices Summary</h3>
<div class="outline-text-3" id="text-6-8">
<p>
Key principles to follow when using org-roam:
</p>

<ol class="org-ol">
<li><b>Atomic Notes</b>: One idea per note - keeps notes focused and linkable</li>
<li><b>Consistent Tagging</b>: Use tags systematically (e.g., <code>:permanent:</code>, <code>:literature:</code>, <code>:concept:</code>)</li>
<li><b>Regular Capturing</b>: Use daily notes to capture fleeting thoughts immediately</li>
<li><b>Link Liberally</b>: Create connections between notes to build your knowledge graph</li>
<li><b>Regular Reviews</b>: Periodically review and refactor notes to strengthen connections</li>
<li><b>Structured Templates</b>: Use capture templates to maintain consistency</li>
<li><b>Hierarchical Organization</b>: Use subdirectories (daily/, literature/, etc.) for better organization</li>
<li><b>Database Maintenance</b>: Let org-roam-db-autosync-mode handle synchronization automatically</li>
<li><b>Safe Deletion</b>: Always check backlinks before deleting notes to avoid orphaned links</li>
</ol>
</div>
</div>

<div id="outline-container-orgbf36e2e" class="outline-3">
<h3 id="orgbf36e2e"><span class="section-number-3">6.9.</span> Common Workflows</h3>
<div class="outline-text-3" id="text-6-9">
</div>
<div id="outline-container-org53afa5f" class="outline-4">
<h4 id="org53afa5f"><span class="section-number-4">6.9.1.</span> Creating a New Note</h4>
<div class="outline-text-4" id="text-6-9-1">
<ol class="org-ol">
<li><code>C-c n f</code> (org-roam-node-find)</li>
<li>Type the note title</li>
<li>Select template (or use default)</li>
<li>Write your note with <code>[[links]]</code> to other notes</li>
</ol>
</div>
</div>

<div id="outline-container-org5a3ec04" class="outline-4">
<h4 id="org5a3ec04"><span class="section-number-4">6.9.2.</span> Linking Notes</h4>
<div class="outline-text-4" id="text-6-9-2">
<ol class="org-ol">
<li><code>C-c n i</code> (org-roam-node-insert) while writing</li>
<li>Search for existing note or create new one</li>
<li>Link is created bidirectionally</li>
</ol>
</div>
</div>

<div id="outline-container-org75fbbc6" class="outline-4">
<h4 id="org75fbbc6"><span class="section-number-4">6.9.3.</span> Daily Journaling</h4>
<div class="outline-text-4" id="text-6-9-3">
<ol class="org-ol">
<li><code>C-c n j</code> (org-roam-dailies-capture-today)</li>
<li>Select template (journal, meeting, task, etc.)</li>
<li>Write entry - automatically timestamped</li>
</ol>
</div>
</div>

<div id="outline-container-org5e81fa0" class="outline-4">
<h4 id="org5e81fa0"><span class="section-number-4">6.9.4.</span> Reviewing Connections</h4>
<div class="outline-text-4" id="text-6-9-4">
<ol class="org-ol">
<li><code>C-c n l</code> (org-roam-buffer-toggle) to see backlinks</li>
<li><code>C-c n g</code> (org-roam-graph) for visual exploration</li>
<li><code>C-c n u</code> (org-roam-ui-mode) for interactive web interface</li>
</ol>
</div>
</div>

<div id="outline-container-orgd445a04" class="outline-4">
<h4 id="orgd445a04"><span class="section-number-4">6.9.5.</span> Deleting Notes Safely</h4>
<div class="outline-text-4" id="text-6-9-5">
<p>
<b>Method 1: Delete from anywhere (recommended)</b>
</p>
<ol class="org-ol">
<li><code>M-x fu/org-roam-node-delete</code> from any buffer</li>
<li>Select the note to delete from minibuffer (with completion)</li>
<li>If backlinks exist, the note opens and backlinks sidebar shows warning</li>
<li>Check each linking note and update/remove links</li>
<li>Run the command again to confirm deletion</li>
<li>Database automatically syncs after deletion</li>
</ol>

<p>
<b>Method 2: Delete current note</b>
</p>
<ol class="org-ol">
<li>Open the note you want to delete</li>
<li><code>M-x fu/org-roam-node-delete</code> (automatically uses current note)</li>
<li>Follow steps 3-6 from Method 1</li>
</ol>

<p>
<b>Alternative manual method:</b>
</p>
<ol class="org-ol">
<li><code>C-c n l</code> to check backlinks first</li>
<li>Update all linking notes</li>
<li>Delete the file normally</li>
<li><code>M-x org-roam-db-sync</code> to clean up the database</li>
</ol>
</div>
</div>
</div>
</div>

<div id="outline-container-org80286e9" class="outline-2">
<h2 id="org80286e9"><span class="section-number-2">7.</span> Remote Access Setup</h2>
<div class="outline-text-2" id="text-7">
<p>
This section covers how to access org-roam from anywhere using cloud servers (AWS EC2, VPS, etc.) instead of Notion or Obsidian.
</p>
</div>

<div id="outline-container-org4759cd3" class="outline-3">
<h3 id="org4759cd3"><span class="section-number-3">7.1.</span> Overview of Remote Access Approaches</h3>
<div class="outline-text-3" id="text-7-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Approach</th>
<th scope="col" class="org-left">Pros</th>
<th scope="col" class="org-left">Cons</th>
<th scope="col" class="org-left">Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">SSH + Mosh</td>
<td class="org-left">Low latency, no sync conflicts</td>
<td class="org-left">Requires network</td>
<td class="org-left">Primary remote workflow</td>
</tr>

<tr>
<td class="org-left">org-roam-ui Web</td>
<td class="org-left">Mobile-friendly, visual</td>
<td class="org-left">Read-only</td>
<td class="org-left">Browsing on mobile</td>
</tr>

<tr>
<td class="org-left">Git Sync</td>
<td class="org-left">Offline access, version control</td>
<td class="org-left">Manual conflicts</td>
<td class="org-left">Multiple devices</td>
</tr>

<tr>
<td class="org-left">TRAMP</td>
<td class="org-left">Use local Emacs</td>
<td class="org-left">Some lag</td>
<td class="org-left">Occasional remote editing</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org1b42419" class="outline-3">
<h3 id="org1b42419"><span class="section-number-3">7.2.</span> AWS EC2 / VPS Setup Guide</h3>
<div class="outline-text-3" id="text-7-2">
</div>
<div id="outline-container-orge3d1942" class="outline-4">
<h4 id="orge3d1942"><span class="section-number-4">7.2.1.</span> Initial Server Setup</h4>
<div class="outline-text-4" id="text-7-2-1">
<p>
<b>Prerequisites:</b>
</p>
<ul class="org-ul">
<li>AWS account or any VPS provider (DigitalOcean, Linode, etc.)</li>
<li>SSH key pair configured</li>
</ul>

<p>
<b>Launch Instance:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Recommended specs:
</span><span class="org-comment-delimiter"># </span><span class="org-comment">- t2.micro or t3.micro (AWS free tier)
</span><span class="org-comment-delimiter"># </span><span class="org-comment">- Ubuntu 24.04 LTS
</span><span class="org-comment-delimiter"># </span><span class="org-comment">- 1GB RAM minimum, 20GB disk
</span><span class="org-comment-delimiter"># </span><span class="org-comment">- Security group: SSH (22), Mosh (60000-61000 UDP), optional HTTP (8080)</span>
</pre>
</div>

<p>
<b>Install dependencies on server:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo apt update &amp;&amp; sudo apt install -y <span class="org-sh-escaped-newline">\</span>
  emacs-nox <span class="org-sh-escaped-newline">\</span>
  tmux <span class="org-sh-escaped-newline">\</span>
  mosh <span class="org-sh-escaped-newline">\</span>
  sqlite3 <span class="org-sh-escaped-newline">\</span>
  ripgrep <span class="org-sh-escaped-newline">\</span>
  git <span class="org-sh-escaped-newline">\</span>
  build-essential
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf6348f4" class="outline-4">
<h4 id="orgf6348f4"><span class="section-number-4">7.2.2.</span> Transfer Org-Roam Files</h4>
<div class="outline-text-4" id="text-7-2-2">
<p>
<b>Option 1: Git (recommended)</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">On local machine - push org-roam to Git
</span><span class="org-builtin">cd</span> ~/org-roam
git init
<span class="org-builtin">echo</span> <span class="org-string">"org-roam.db"</span> &gt;&gt; .gitignore  <span class="org-comment-delimiter"># </span><span class="org-comment">IMPORTANT: Never sync database!
</span>git add .
git commit -m <span class="org-string">"Initial org-roam commit"</span>
git remote add origin &lt;your-repo-url&gt;
git push -u origin main

<span class="org-comment-delimiter"># </span><span class="org-comment">On EC2 server - clone repository
</span>git clone &lt;your-repo-url&gt; ~/org-roam
</pre>
</div>

<p>
<b>Option 2: SCP (one-time copy)</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Copy from local to server (excludes database)
</span>rsync -avz --exclude=<span class="org-string">'org-roam.db'</span> ~/org-roam/ user@ec2-ip:~/org-roam/
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf23a25f" class="outline-4">
<h4 id="orgf23a25f"><span class="section-number-4">7.2.3.</span> Configure Emacs on Server</h4>
<div class="outline-text-4" id="text-7-2-3">
<p>
<b>Transfer your Emacs configuration:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Option 1: If using this repository
</span><span class="org-builtin">cd</span> ~/Projects/mandoo180.github.io
git push
<span class="org-comment-delimiter"># </span><span class="org-comment">Then on server:
</span>git clone &lt;this-repo-url&gt;
<span class="org-builtin">cd</span> mandoo180.github.io
./tangle.sh

<span class="org-comment-delimiter"># </span><span class="org-comment">Option 2: Copy specific config
</span>scp -r ~/.emacs.d/elisp/settings/org-conf.el user@ec2-ip:~/.emacs.d/elisp/settings/
</pre>
</div>

<p>
<b>Start Emacs daemon:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">On server
</span>emacs --daemon
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfc72c5c" class="outline-4">
<h4 id="orgfc72c5c"><span class="section-number-4">7.2.4.</span> Systemd Service for Auto-Start</h4>
<div class="outline-text-4" id="text-7-2-4">
<p>
Create a systemd service to start Emacs daemon automatically on boot.
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">~/.config/systemd/user/emacs.service
</span>[<span class="org-type">Unit</span>]
<span class="org-variable-name">Description</span>=Emacs text editor daemon
<span class="org-variable-name">Documentation</span>=info:emacs man:emacs(1) https://gnu.org/software/emacs/

[<span class="org-type">Service</span>]
<span class="org-variable-name">Type</span>=notify
<span class="org-variable-name">ExecStart</span>=/usr/bin/emacs --fg-daemon
<span class="org-variable-name">ExecStop</span>=/usr/bin/emacsclient --eval <span class="org-string">"(kill-emacs)"</span>
<span class="org-variable-name">Environment</span>=SSH_AUTH_SOCK=%t/keyring/ssh
<span class="org-variable-name">Restart</span>=on-failure

[<span class="org-type">Install</span>]
<span class="org-variable-name">WantedBy</span>=default.target
</pre>
</div>

<p>
<b>Enable the service:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">On server
</span>mkdir -p ~/.config/systemd/user
<span class="org-comment-delimiter"># </span><span class="org-comment">Create the service file above, then:
</span>systemctl --user enable emacs.service
systemctl --user start emacs.service
systemctl --user status emacs.service
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc71c3f5" class="outline-3">
<h3 id="orgc71c3f5"><span class="section-number-3">7.3.</span> Fast SSH Access with Mosh</h3>
<div class="outline-text-3" id="text-7-3">
<p>
Mosh (Mobile Shell) provides near-zero latency for remote Emacs usage.
</p>
</div>

<div id="outline-container-org74df9fe" class="outline-4">
<h4 id="org74df9fe"><span class="section-number-4">7.3.1.</span> Install Mosh</h4>
<div class="outline-text-4" id="text-7-3-1">
<p>
<b>On your local machine (macOS):</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">brew install mosh
</pre>
</div>

<p>
<b>On server:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo apt install mosh
</pre>
</div>
</div>
</div>

<div id="outline-container-org3908fc9" class="outline-4">
<h4 id="org3908fc9"><span class="section-number-4">7.3.2.</span> Configure Firewall</h4>
<div class="outline-text-4" id="text-7-3-2">
<p>
<b>AWS Security Group:</b>
</p>
<ul class="org-ul">
<li>Add inbound rule: UDP ports 60000-61000 from your IP</li>
</ul>

<p>
<b>UFW (on server):</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">sudo ufw allow 60000:61000/udp
</pre>
</div>
</div>
</div>

<div id="outline-container-org1bcf541" class="outline-4">
<h4 id="org1bcf541"><span class="section-number-4">7.3.3.</span> Connect with Mosh</h4>
<div class="outline-text-4" id="text-7-3-3">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Instead of: ssh user@ec2-ip
</span>mosh user@ec2-ip

<span class="org-comment-delimiter"># </span><span class="org-comment">Inside mosh session
</span>tmux attach || tmux new
emacsclient -nw

<span class="org-comment-delimiter"># </span><span class="org-comment">Your org-roam is now accessible!
</span>C-c n f  <span class="org-comment-delimiter"># </span><span class="org-comment">Find notes
</span>C-c n u  <span class="org-comment-delimiter"># </span><span class="org-comment">Open web UI</span>
</pre>
</div>

<p>
<b>Benefits over SSH:</b>
</p>
<ul class="org-ul">
<li>Typing appears instantly (local echo)</li>
<li>Survives network changes (WiFi  cellular)</li>
<li>Automatic reconnection after laptop sleep</li>
<li>Works on spotty connections</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgea61317" class="outline-3">
<h3 id="orgea61317"><span class="section-number-3">7.4.</span> org-roam-ui for Mobile Web Access</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Access your knowledge graph from any device with a web browser.
</p>
</div>

<div id="outline-container-org42eeec3" class="outline-4">
<h4 id="org42eeec3"><span class="section-number-4">7.4.1.</span> Local Access (SSH Tunnel)</h4>
<div class="outline-text-4" id="text-7-4-1">
<p>
Most secure method - UI only accessible through SSH tunnel.
</p>

<p>
<b>In terminal:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Create SSH tunnel
</span>ssh -L 35901:localhost:35901 user@ec2-ip

<span class="org-comment-delimiter"># </span><span class="org-comment">Keep this terminal open, then in Emacs on server:
</span>M-x org-roam-ui-mode
</pre>
</div>

<p>
<b>Access on any device:</b>
</p>
<ul class="org-ul">
<li>Open browser to <code>http://localhost:35901</code></li>
<li>Works on desktop, phone, tablet</li>
<li>No public exposure</li>
</ul>
</div>
</div>

<div id="outline-container-orgc77091f" class="outline-4">
<h4 id="orgc77091f"><span class="section-number-4">7.4.2.</span> Remote Access (Bind to Public IP)</h4>
<div class="outline-text-4" id="text-7-4-2">
<p>
For direct access without SSH tunnel (less secure).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">org-conf-remote.el --- Remote access configuration  -*- lexical-binding: t; -*-
</span><span class="org-comment-delimiter">;;; </span><span class="org-comment">Commentary:
</span><span class="org-comment-delimiter">;; </span><span class="org-comment">Configuration for accessing org-roam-ui from remote devices
</span><span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:
</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Only enable this on your remote server, not local machine
</span>(<span class="org-keyword">when</span> (getenv <span class="org-string">"ORG_ROAM_REMOTE"</span>)
  (<span class="org-keyword">use-package</span> org-roam-ui
    <span class="org-builtin">:custom</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Bind to all interfaces for remote access
</span>    (org-roam-ui-host <span class="org-string">"0.0.0.0"</span>)  <span class="org-comment-delimiter">;; </span><span class="org-comment">WARNING: Exposes to internet
</span>    (org-roam-ui-port 8080)       <span class="org-comment-delimiter">;; </span><span class="org-comment">Or use reverse proxy
</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Optional: Add basic auth via reverse proxy (nginx/caddy)
</span>    <span class="org-comment-delimiter">;; </span><span class="org-comment">See nginx configuration example below
</span>    ))

(<span class="org-keyword">provide</span> '<span class="org-constant">org-conf-remote</span>)
<span class="org-comment-delimiter">;;; </span><span class="org-comment">org-conf-remote.el ends here</span>
</pre>
</div>

<p>
<b>Set environment variable on server:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Add to ~/.bashrc or ~/.zshrc
</span><span class="org-builtin">export</span> <span class="org-variable-name">ORG_ROAM_REMOTE</span>=1
</pre>
</div>

<p>
<b>Secure with reverse proxy (Nginx example):</b>
</p>
<div class="org-src-container">
<pre class="src src-nginx"># /etc/nginx/sites-available/org-roam
server {
    listen 80;
    server_name roam.yourdomain.com;

    # Basic authentication
    auth_basic "Org-Roam Access";
    auth_basic_user_file /etc/nginx/.htpasswd;

    location / {
        proxy_pass http://localhost:35901;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf5299d7" class="outline-3">
<h3 id="orgf5299d7"><span class="section-number-3">7.5.</span> iOS Quick Capture Setup</h3>
<div class="outline-text-3" id="text-7-5">
<p>
For capturing notes on iPhone/iPad while org-roam runs on server.
</p>
</div>

<div id="outline-container-orgda6f1b8" class="outline-4">
<h4 id="orgda6f1b8"><span class="section-number-4">7.5.1.</span> Option 1: Working Copy + Git Sync</h4>
<div class="outline-text-4" id="text-7-5-1">
<p>
<b>Setup:</b>
</p>
<ol class="org-ol">
<li>Install <a href="https://workingcopy.app/">Working Copy</a> app (iOS Git client)</li>
<li>Clone your org-roam repository</li>
<li>Install <a href="https://www.beorgapp.com/">beorg</a> or <a href="https://plainorg.com/">Plain Org</a> for editing</li>
<li>Configure beorg to use Working Copy directory</li>
</ol>

<p>
<b>Workflow:</b>
</p>
<ol class="org-ol">
<li>Create/edit notes in beorg</li>
<li>Switch to Working Copy</li>
<li>Commit and push changes</li>
<li>On server: <code>git pull</code> (or set up auto-pull)</li>
<li><code>M-x org-roam-db-sync</code> in Emacs</li>
</ol>
</div>
</div>

<div id="outline-container-org3ca9b3c" class="outline-4">
<h4 id="org3ca9b3c"><span class="section-number-4">7.5.2.</span> Option 2: SSH Terminal App</h4>
<div class="outline-text-4" id="text-7-5-2">
<p>
<b>Install terminal app with mosh support:</b>
</p>
<ul class="org-ul">
<li><a href="https://blink.sh/">Blink Shell</a> (iOS) - supports mosh</li>
<li><a href="https://termius.com/">Termius</a> - user-friendly SSH client</li>
</ul>

<p>
<b>Connect to your server:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">mosh user@ec2-ip
tmux attach
emacsclient -nw
<span class="org-comment-delimiter"># </span><span class="org-comment">Full org-roam access on iPhone!</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc389e73" class="outline-3">
<h3 id="orgc389e73"><span class="section-number-3">7.6.</span> Git Sync Workflow</h3>
<div class="outline-text-3" id="text-7-6">
<p>
For offline access and automatic synchronization.
</p>
</div>

<div id="outline-container-orgf90b0c4" class="outline-4">
<h4 id="orgf90b0c4"><span class="section-number-4">7.6.1.</span> Auto-Commit Script</h4>
<div class="outline-text-4" id="text-7-6-1">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">~/bin/org-roam-sync.sh
</span><span class="org-comment-delimiter"># </span><span class="org-comment">Automatically sync org-roam changes
</span>
<span class="org-builtin">cd</span> ~/org-roam || <span class="org-keyword">exit</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Pull latest changes
</span>git pull --rebase

<span class="org-comment-delimiter"># </span><span class="org-comment">Add all changes
</span>git add *.org

<span class="org-comment-delimiter"># </span><span class="org-comment">Commit if there are changes
</span><span class="org-keyword">if</span> <span class="org-negation-char">!</span> git diff-index --quiet HEAD --; <span class="org-keyword">then</span>
    git commit -m <span class="org-string">"Auto-sync: $(</span><span class="org-sh-quoted-exec">date '+%Y-%m-%d %H:%M'</span><span class="org-string">)"</span>
    git push
    <span class="org-builtin">echo</span> <span class="org-string">"Changes synced at $(</span><span class="org-sh-quoted-exec">date</span><span class="org-string">)"</span>
<span class="org-keyword">fi</span>
</pre>
</div>

<p>
<b>Set up cron job (run every 5 minutes):</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">crontab -e
<span class="org-comment-delimiter"># </span><span class="org-comment">Add line:
</span>*/5 * * * * ~/bin/org-roam-sync.sh &gt;&gt; ~/logs/org-sync.log 2&gt;&amp;1
</pre>
</div>

<p>
<b>Sync database after pull:</b>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Auto-sync database when files change
</span>(<span class="org-keyword">defun</span> <span class="org-function-name">fu/org-roam-auto-sync</span> ()
  <span class="org-doc">"Automatically sync org-roam database when files change."</span>
  (<span class="org-keyword">when</span> (<span class="org-keyword">and</span> (buffer-file-name)
             (string-prefix-p (expand-file-name org-roam-directory)
                            (buffer-file-name)))
    (org-roam-db-sync)))

(add-hook 'after-save-hook #'fu/org-roam-auto-sync)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5a7a028" class="outline-3">
<h3 id="org5a7a028"><span class="section-number-3">7.7.</span> Backup Strategy</h3>
<div class="outline-text-3" id="text-7-7">
</div>
<div id="outline-container-orga1fd5c5" class="outline-4">
<h4 id="orga1fd5c5"><span class="section-number-4">7.7.1.</span> Git as Backup</h4>
<div class="outline-text-4" id="text-7-7-1">
<p>
Your Git repository serves as automatic backup:
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">All changes are version controlled
</span>git log --oneline  <span class="org-comment-delimiter"># </span><span class="org-comment">See history
</span>git show &lt;commit&gt;  <span class="org-comment-delimiter"># </span><span class="org-comment">View specific changes
</span>git checkout &lt;commit&gt; -- file.org  <span class="org-comment-delimiter"># </span><span class="org-comment">Restore old version</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org34ea432" class="outline-4">
<h4 id="org34ea432"><span class="section-number-4">7.7.2.</span> S3 Backup (AWS)</h4>
<div class="outline-text-4" id="text-7-7-2">
<p>
For additional cloud backup:
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Install AWS CLI
</span>sudo apt install awscli

<span class="org-comment-delimiter"># </span><span class="org-comment">Configure credentials
</span>aws configure

<span class="org-comment-delimiter"># </span><span class="org-comment">Backup script
</span>aws s3 sync ~/org-roam/ s3://my-org-roam-backup/ <span class="org-sh-escaped-newline">\</span>
    --exclude <span class="org-string">"*.db"</span> <span class="org-sh-escaped-newline">\</span>
    --exclude <span class="org-string">".git/*"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org44d8773" class="outline-3">
<h3 id="org44d8773"><span class="section-number-3">7.8.</span> Daily Workflow Examples</h3>
<div class="outline-text-3" id="text-7-8">
</div>
<div id="outline-container-org0d21e34" class="outline-4">
<h4 id="org0d21e34"><span class="section-number-4">7.8.1.</span> Morning Routine (Desktop)</h4>
<div class="outline-text-4" id="text-7-8-1">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Connect to server
</span>mosh user@ec2-ip

<span class="org-comment-delimiter"># </span><span class="org-comment">Start/resume tmux session
</span>tmux attach || tmux new

<span class="org-comment-delimiter"># </span><span class="org-comment">Start Emacs
</span>emacsclient -nw

<span class="org-comment-delimiter"># </span><span class="org-comment">Check daily notes
</span>C-c n t  <span class="org-comment-delimiter"># </span><span class="org-comment">Today's note
</span>C-c n l  <span class="org-comment-delimiter"># </span><span class="org-comment">View backlinks
</span>C-c n u  <span class="org-comment-delimiter"># </span><span class="org-comment">Open graph on tablet</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org13b3261" class="outline-4">
<h4 id="org13b3261"><span class="section-number-4">7.8.2.</span> Quick Capture (Mobile - iOS)</h4>
<div class="outline-text-4" id="text-7-8-2">
<ol class="org-ol">
<li>Open Blink Shell on iPhone</li>
<li><code>mosh user@server</code></li>
<li><code>C-c n j</code> for quick journal entry</li>
<li>Type note and save</li>
<li>Swipe away - session persists</li>
</ol>
</div>
</div>

<div id="outline-container-org04845f3" class="outline-4">
<h4 id="org04845f3"><span class="section-number-4">7.8.3.</span> Browsing on iPad</h4>
<div class="outline-text-4" id="text-7-8-3">
<ol class="org-ol">
<li>Safari  <code>http://localhost:35901</code> (if SSH tunnel running)</li>
<li>Or direct IP if configured with auth</li>
<li>Explore graph visually</li>
<li>Click nodes to read content</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org253e866" class="outline-3">
<h3 id="org253e866"><span class="section-number-3">7.9.</span> Troubleshooting</h3>
<div class="outline-text-3" id="text-7-9">
</div>
<div id="outline-container-orgada728b" class="outline-4">
<h4 id="orgada728b"><span class="section-number-4">7.9.1.</span> Database Issues</h4>
<div class="outline-text-4" id="text-7-9-1">
<p>
<b>Symptom:</b> "Database version mismatch" error
</p>

<p>
<b>Solution:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Delete database and regenerate
</span>rm ~/.emacs.d/org-roam.db
<span class="org-comment-delimiter"># </span><span class="org-comment">In Emacs:
</span>M-x org-roam-db-sync
</pre>
</div>
</div>
</div>

<div id="outline-container-org82133bd" class="outline-4">
<h4 id="org82133bd"><span class="section-number-4">7.9.2.</span> Mosh Won't Connect</h4>
<div class="outline-text-4" id="text-7-9-2">
<p>
<b>Check firewall:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">On server
</span>sudo ufw status
sudo ufw allow 60000:61000/udp

<span class="org-comment-delimiter"># </span><span class="org-comment">AWS Security Group
</span><span class="org-comment-delimiter"># </span><span class="org-comment">Add UDP 60000-61000 inbound rule</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0423743" class="outline-4">
<h4 id="org0423743"><span class="section-number-4">7.9.3.</span> Emacs Daemon Not Starting</h4>
<div class="outline-text-4" id="text-7-9-3">
<p>
<b>Check status:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">systemctl --user status emacs.service
journalctl --user -u emacs.service -f
</pre>
</div>

<p>
<b>Manual start:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">emacs --daemon --debug-init
</pre>
</div>
</div>
</div>

<div id="outline-container-org89da73b" class="outline-4">
<h4 id="org89da73b"><span class="section-number-4">7.9.4.</span> org-roam-ui Not Accessible</h4>
<div class="outline-text-4" id="text-7-9-4">
<p>
<b>Verify it's running:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">On server
</span>netstat -tlnp | grep 35901
<span class="org-comment-delimiter"># </span><span class="org-comment">or
</span>lsof -i :35901
</pre>
</div>

<p>
<b>Test locally first:</b>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">SSH into server
</span>curl http://localhost:35901
<span class="org-comment-delimiter"># </span><span class="org-comment">Should return HTML</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9d9a380" class="outline-3">
<h3 id="org9d9a380"><span class="section-number-3">7.10.</span> Cost Estimation</h3>
<div class="outline-text-3" id="text-7-10">
</div>
<div id="outline-container-org7f9eb5c" class="outline-4">
<h4 id="org7f9eb5c"><span class="section-number-4">7.10.1.</span> AWS EC2 Free Tier</h4>
<div class="outline-text-4" id="text-7-10-1">
<ul class="org-ul">
<li>t2.micro: Free for 12 months (750 hours/month)</li>
<li>After free tier: ~$8/month</li>
<li>Storage: 20GB free tier</li>
</ul>
</div>
</div>

<div id="outline-container-orgb2bbb6d" class="outline-4">
<h4 id="orgb2bbb6d"><span class="section-number-4">7.10.2.</span> Alternative VPS Providers</h4>
<div class="outline-text-4" id="text-7-10-2">
<ul class="org-ul">
<li>DigitalOcean: $4/month (basic droplet)</li>
<li>Linode: $5/month (Nanode 1GB)</li>
<li>Hetzner: 3.79/month (CX11)</li>
</ul>
</div>
</div>

<div id="outline-container-org71152c5" class="outline-4">
<h4 id="org71152c5"><span class="section-number-4">7.10.3.</span> Total Monthly Cost</h4>
<div class="outline-text-4" id="text-7-10-3">
<ul class="org-ul">
<li>Server: $0-8/month</li>
<li>iOS apps: $0-15 (one-time for beorg)</li>
<li><b><b>Total: $0-10/month</b></b> vs Notion ($12/mo) or Obsidian Sync ($4/mo)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org3c0c616" class="outline-3">
<h3 id="org3c0c616"><span class="section-number-3">7.11.</span> Comparison to Notion/Obsidian</h3>
<div class="outline-text-3" id="text-7-11">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Feature</th>
<th scope="col" class="org-left">Org-Roam (Remote)</th>
<th scope="col" class="org-left">Obsidian</th>
<th scope="col" class="org-left">Notion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Cost</td>
<td class="org-left">$0-10/mo</td>
<td class="org-left">$4/mo (sync)</td>
<td class="org-left">$12/mo</td>
</tr>

<tr>
<td class="org-left">Mobile apps</td>
<td class="org-left">Terminal/web</td>
<td class="org-left">Native</td>
<td class="org-left">Native</td>
</tr>

<tr>
<td class="org-left">Offline</td>
<td class="org-left">Optional</td>
<td class="org-left">Yes</td>
<td class="org-left">Limited</td>
</tr>

<tr>
<td class="org-left">Privacy</td>
<td class="org-left">Full control</td>
<td class="org-left">Full control</td>
<td class="org-left">Cloud-based</td>
</tr>

<tr>
<td class="org-left">Sync</td>
<td class="org-left">Manual/Git</td>
<td class="org-left">Auto</td>
<td class="org-left">Auto</td>
</tr>

<tr>
<td class="org-left">Learning curve</td>
<td class="org-left">High</td>
<td class="org-left">Medium</td>
<td class="org-left">Low</td>
</tr>
</tbody>
</table>

<p>
<b>Advantages of remote org-roam:</b>
</p>
<ul class="org-ul">
<li> Single source of truth (no conflicts)</li>
<li> Full Emacs power</li>
<li> Plain text + version control</li>
<li> Zero vendor lock-in</li>
<li> Works on any device with SSH</li>
</ul>

<p>
<b>Disadvantages:</b>
</p>
<ul class="org-ul">
<li> Requires technical setup</li>
<li> No native mobile apps</li>
<li> Needs network for full features</li>
</ul>
</div>
</div>

<div id="outline-container-org7097c9d" class="outline-3">
<h3 id="org7097c9d"><span class="section-number-3">7.12.</span> References and Resources</h3>
<div class="outline-text-3" id="text-7-12">
<ul class="org-ul">
<li><a href="https://mosh.org/">Mosh (Mobile Shell)</a></li>
<li><a href="https://github.com/org-roam/org-roam-ui">org-roam-ui GitHub</a></li>
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html">Emacs Server Documentation</a></li>
<li><a href="https://blink.sh/">Blink Shell (iOS)</a></li>
<li><a href="https://www.beorgapp.com/">beorg (iOS Org-mode app)</a></li>
<li><a href="https://plainorg.com/">Plain Org (iOS)</a></li>
</ul>
</div>
</div>
</div>
</main>
</body>
</html>
