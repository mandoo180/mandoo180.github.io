<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lua Programming Configuration</title>
<meta name="generator" content="Org Mode" />
<meta name="viewport" content="width=device-width, initial-scale=1"><script src="https://cdn.tailwindcss.com?plugins=typography"></script><script>window.tailwind = window.tailwind || {};window.tailwind.config = { darkMode: 'media' }; /* follow browser */</script>
<style>
  :root { color-scheme: light dark; }      /* hint to UA widgets, form controls */
  body { margin:0; }
  @media (prefers-color-scheme: light) { body { background: #ffffff; } }
  @media (prefers-color-scheme: dark)  { body { background: #0b0b0b; } }
</style><link rel="stylesheet" href="/assets/styles/toc-sidebar.css"><script src="/assets/scripts/toc-sidebar.js" defer></script>
</head>
<body>
<main id="content" class="prose prose-zinc dark:prose-invert mx-auto w-full max-w-xl md:max-w-xl lg:max-w-2xl xl:max-w-3xl px-4 sm:px-6 lg:px-8">
<h1 class="title">Lua Programming Configuration</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orga4cdc99">1. Lua Development Environment</a></li>
<li><a href="#org9a5fafe">2. Lua Mode</a></li>
<li><a href="#orgb784d44">3. LSP Support for Lua</a></li>
<li><a href="#org1037ece">4. Lua REPL Integration</a></li>
<li><a href="#orgd4d44ba">5. Love2D Support (Optional)</a></li>
<li><a href="#org1f6c503">6. Debugging Support</a></li>
<li><a href="#orgeabf3b0">7. Code Formatting</a></li>
<li><a href="#orgb8ee5fe">8. Project Templates</a></li>
<li><a href="#orgdfd0d16">9. Keybindings Summary</a></li>
<li><a href="#org14c8b10">10. Installation Requirements</a></li>
<li><a href="#orgb03989f">11. End of Configuration</a></li>
</ul>
</div>
</div>

<div id="outline-container-orga4cdc99" class="outline-2">
<h2 id="orga4cdc99"><span class="section-number-2">1.</span> Lua Development Environment</h2>
<div class="outline-text-2" id="text-1">
<p>
Configuration for Lua programming, including syntax highlighting, LSP support, and REPL integration.
</p>
</div>
</div>

<div id="outline-container-org9a5fafe" class="outline-2">
<h2 id="org9a5fafe"><span class="section-number-2">2.</span> Lua Mode</h2>
<div class="outline-text-2" id="text-2">
<p>
Core Lua editing mode with syntax highlighting and indentation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">prog-lua-conf.el --- Lua programming configuration  -*- lexical-binding: t; -*-
</span><span class="org-comment-delimiter">;;; </span><span class="org-comment">Commentary:
</span><span class="org-comment-delimiter">;;; </span><span class="org-comment">Lua development environment setup including LSP and REPL support
</span><span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:
</span>
(<span class="org-keyword">use-package</span> lua-mode
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:mode</span> <span class="org-string">"\\.lua\\'"</span>
  <span class="org-builtin">:interpreter</span> <span class="org-string">"lua"</span>
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Indentation settings
</span>  (lua-indent-level 2)
  (lua-indent-string-contents t)
  (lua-indent-nested-block-content-align nil)
  (lua-indent-close-paren-align nil)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Documentation lookup
</span>  (lua-documentation-url <span class="org-string">"https://www.lua.org/manual/5.4/"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">:config
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">Set up company completion for Lua
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'lua-mode-hook
</span>  <span class="org-comment-delimiter">;;           </span><span class="org-comment">(lambda ()
</span>  <span class="org-comment-delimiter">;;             </span><span class="org-comment">(setq-local company-backends
</span>  <span class="org-comment-delimiter">;;                         </span><span class="org-comment">'((company-lsp
</span>  <span class="org-comment-delimiter">;;                            </span><span class="org-comment">company-lua
</span>  <span class="org-comment-delimiter">;;                            </span><span class="org-comment">company-keywords
</span>  <span class="org-comment-delimiter">;;                            </span><span class="org-comment">company-gtags
</span>  <span class="org-comment-delimiter">;;                            </span><span class="org-comment">company-yasnippet
</span>  <span class="org-comment-delimiter">;;                            </span><span class="org-comment">company-files)))))
</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable electric pair mode for automatic bracket pairing
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'lua-mode-hook #'electric-pair-local-mode)
</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable show-paren-mode for matching parentheses
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'lua-mode-hook #'show-paren-mode)
</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable line numbers
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'lua-mode-hook #'display-line-numbers-mode)
</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">:bind
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(:map lua-mode-map
</span>  <span class="org-comment-delimiter">;;       </span><span class="org-comment">("C-c C-d" . lua-search-documentation)
</span>  <span class="org-comment-delimiter">;;       </span><span class="org-comment">("C-c C-r" . lua-send-region)
</span>  <span class="org-comment-delimiter">;;       </span><span class="org-comment">("C-c C-l" . lua-send-buffer)
</span>  <span class="org-comment-delimiter">;;       </span><span class="org-comment">("C-c C-c" . lua-send-current-line))
</span>  )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb784d44" class="outline-2">
<h2 id="orgb784d44"><span class="section-number-2">3.</span> LSP Support for Lua</h2>
<div class="outline-text-2" id="text-3">
<p>
Configure Language Server Protocol support using lua-language-server (sumneko<sub>lua</sub>).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> lsp-mode
  <span class="org-builtin">:hook</span> (lua-mode . lsp-deferred)
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Lua LSP specific settings
</span>  (lsp-lua-runtime-version <span class="org-string">"Lua 5.4"</span>)
  (lsp-lua-diagnostics-globals '(<span class="org-string">"vim"</span> <span class="org-string">"awesome"</span> <span class="org-string">"love"</span>))  <span class="org-comment-delimiter">; </span><span class="org-comment">Add global variables to ignore
</span>  (lsp-lua-workspace-library
   '(<span class="org-string">"/usr/share/awesome/lib"</span>  <span class="org-comment-delimiter">; </span><span class="org-comment">For AwesomeWM development
</span>     <span class="org-string">"/usr/share/lua/5.4"</span>))     <span class="org-comment-delimiter">; </span><span class="org-comment">System Lua libraries
</span>  (lsp-lua-completion-call-snippet <span class="org-string">"Replace"</span>)
  (lsp-lua-telemetry-enable nil)  <span class="org-comment-delimiter">; </span><span class="org-comment">Disable telemetry
</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Register lua-language-server if not already registered
</span>  (<span class="org-keyword">unless</span> (member 'lua-language-server (mapcar #'car lsp-clients))
    (lsp-register-client
     (make-lsp-client
      <span class="org-builtin">:new-connection</span> (lsp-stdio-connection <span class="org-string">"lua-language-server"</span>)
      <span class="org-builtin">:major-modes</span> '(lua-mode)
      <span class="org-builtin">:server-id</span> 'lua-language-server
      <span class="org-builtin">:priority</span> 1))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1037ece" class="outline-2">
<h2 id="org1037ece"><span class="section-number-2">4.</span> Lua REPL Integration</h2>
<div class="outline-text-2" id="text-4">
<p>
Interactive Lua development with inferior Lua process.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> lua-mode
  <span class="org-builtin">:custom</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Configure Lua interpreter
</span>  (lua-default-application <span class="org-string">"lua"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">For LuaJIT
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(lua-default-application "luajit")
</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Custom Lua interpreter with arguments
</span>  <span class="org-comment-delimiter">;; </span><span class="org-comment">(lua-default-application '("lua" "-i" "-e" "_PROMPT='&gt; '"))
</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Function to start Lua REPL in a split window
</span>  (<span class="org-keyword">defun</span> <span class="org-function-name">my/lua-start-repl</span> ()
    <span class="org-doc">"Start Lua REPL in a split window."</span>
    (<span class="org-keyword">interactive</span>)
    (<span class="org-keyword">if</span> (get-buffer lua-process-buffer)
        (switch-to-buffer-other-window lua-process-buffer)
      (<span class="org-keyword">progn</span>
        (split-window-below)
        (other-window 1)
        (lua-start-process))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Function to send current function to REPL
</span>  (<span class="org-keyword">defun</span> <span class="org-function-name">my/lua-send-function</span> ()
    <span class="org-doc">"Send the current function to Lua REPL."</span>
    (<span class="org-keyword">interactive</span>)
    (<span class="org-keyword">save-excursion</span>
      (lua-beginning-of-proc)
      (<span class="org-keyword">let</span> ((start (point)))
        (lua-end-of-proc)
        (lua-send-region start (point)))))

  <span class="org-builtin">:bind</span>
  (<span class="org-builtin">:map</span> lua-mode-map
        (<span class="org-string">"C-c C-z"</span> . my/lua-start-repl)
        (<span class="org-string">"C-c C-f"</span> . my/lua-send-function)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4d44ba" class="outline-2">
<h2 id="orgd4d44ba"><span class="section-number-2">5.</span> Love2D Support (Optional)</h2>
<div class="outline-text-2" id="text-5">
<p>
Configuration for Love2D game development framework.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Only load if doing Love2D development
</span>(<span class="org-keyword">when</span> (executable-find <span class="org-string">"love"</span>)
  (<span class="org-keyword">use-package</span> love-minor-mode
    <span class="org-builtin">:ensure</span> t
    <span class="org-builtin">:hook</span> (lua-mode . love-minor-mode)
    <span class="org-builtin">:custom</span>
    (love-exe <span class="org-string">"love"</span>)  <span class="org-comment-delimiter">; </span><span class="org-comment">Path to Love2D executable
</span>    <span class="org-builtin">:config</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Add Love2D API to LSP globals
</span>    (<span class="org-keyword">when</span> (<span class="org-keyword">featurep</span> '<span class="org-constant">lsp-mode</span>)
      (add-to-list 'lsp-lua-diagnostics-globals <span class="org-string">"love"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f6c503" class="outline-2">
<h2 id="org1f6c503"><span class="section-number-2">6.</span> Debugging Support</h2>
<div class="outline-text-2" id="text-6">
<p>
Configure debugging support for Lua using DAP (Debug Adapter Protocol).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> dap-mode
  <span class="org-builtin">:after</span> lua-mode
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Lua debugging configuration
</span>  (<span class="org-keyword">require</span> '<span class="org-constant">dap-lua</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Local Lua debugging template
</span>  (dap-register-debug-template
   <span class="org-string">"Lua Run"</span>
   (list <span class="org-builtin">:type</span> <span class="org-string">"lua"</span>
         <span class="org-builtin">:request</span> <span class="org-string">"launch"</span>
         <span class="org-builtin">:name</span> <span class="org-string">"Lua Run"</span>
         <span class="org-builtin">:program</span> (<span class="org-keyword">lambda</span> () (buffer-file-name))
         <span class="org-builtin">:cwd</span> (<span class="org-keyword">lambda</span> () (project-root (project-current)))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Love2D debugging template
</span>  (dap-register-debug-template
   <span class="org-string">"Love2D Run"</span>
   (list <span class="org-builtin">:type</span> <span class="org-string">"lua"</span>
         <span class="org-builtin">:request</span> <span class="org-string">"launch"</span>
         <span class="org-builtin">:name</span> <span class="org-string">"Love2D Run"</span>
         <span class="org-builtin">:program</span> <span class="org-string">"love"</span>
         <span class="org-builtin">:args</span> (<span class="org-keyword">lambda</span> () (list (project-root (project-current))))
         <span class="org-builtin">:cwd</span> (<span class="org-keyword">lambda</span> () (project-root (project-current))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeabf3b0" class="outline-2">
<h2 id="orgeabf3b0"><span class="section-number-2">7.</span> Code Formatting</h2>
<div class="outline-text-2" id="text-7">
<p>
Setup automatic code formatting using lua-fmt or stylua.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Use stylua if available (recommended)
</span>(<span class="org-keyword">when</span> (executable-find <span class="org-string">"stylua"</span>)
  (<span class="org-keyword">use-package</span> reformatter
    <span class="org-builtin">:ensure</span> t
    <span class="org-builtin">:config</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Define stylua formatter
</span>    (reformatter-define lua-stylua
      <span class="org-builtin">:program</span> <span class="org-string">"stylua"</span>
      <span class="org-builtin">:args</span> '(<span class="org-string">"-"</span>)
      <span class="org-builtin">:lighter</span> <span class="org-string">" StyLua"</span>)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable on save
</span>    (add-hook 'lua-mode-hook #'lua-stylua-on-save-mode)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Bind to key
</span>    (define-key lua-mode-map (kbd <span class="org-string">"C-c C-f"</span>) #'lua-stylua-buffer)))

<span class="org-comment-delimiter">;; </span><span class="org-comment">Alternative: lua-fmt (if stylua not available)
</span>(<span class="org-keyword">unless</span> (executable-find <span class="org-string">"stylua"</span>)
  (<span class="org-keyword">when</span> (executable-find <span class="org-string">"lua-fmt"</span>)
    (<span class="org-keyword">use-package</span> reformatter
      <span class="org-builtin">:ensure</span> t
      <span class="org-builtin">:config</span>
      (reformatter-define lua-fmt
        <span class="org-builtin">:program</span> <span class="org-string">"lua-fmt"</span>
        <span class="org-builtin">:args</span> '()
        <span class="org-builtin">:lighter</span> <span class="org-string">" LuaFmt"</span>)

      (add-hook 'lua-mode-hook #'lua-fmt-on-save-mode)
      (define-key lua-mode-map (kbd <span class="org-string">"C-c C-f"</span>) #'lua-fmt-buffer))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb8ee5fe" class="outline-2">
<h2 id="orgb8ee5fe"><span class="section-number-2">8.</span> Project Templates</h2>
<div class="outline-text-2" id="text-8">
<p>
Snippets and templates for common Lua patterns.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">use-package</span> yasnippet
  <span class="org-builtin">:hook</span> (lua-mode . yas-minor-mode)
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Define some useful Lua snippets
</span>  (yas-define-snippets
   'lua-mode
   '(<span class="org-comment-delimiter">;; </span><span class="org-comment">Function definition
</span>     (<span class="org-string">"fn"</span> <span class="org-string">"function ${1:name}(${2:args})\n    $0\nend"</span> <span class="org-string">"function"</span>)

     <span class="org-comment-delimiter">;; </span><span class="org-comment">Local function
</span>     (<span class="org-string">"lfn"</span> <span class="org-string">"local function ${1:name}(${2:args})\n    $0\nend"</span> <span class="org-string">"local function"</span>)

     <span class="org-comment-delimiter">;; </span><span class="org-comment">Module definition
</span>     (<span class="org-string">"mod"</span> <span class="org-string">"local M = {}\n\n$0\n\nreturn M"</span> <span class="org-string">"module"</span>)

     <span class="org-comment-delimiter">;; </span><span class="org-comment">Class definition (OOP style)
</span>     (<span class="org-string">"class"</span> <span class="org-string">"local ${1:Class} = {}\n${1:$(capitalize yas-text)}.mt = { __index = ${1:$(capitalize yas-text)} }\n\nfunction ${1:$(capitalize yas-text)}.new(${2:args})\n    local self = setmetatable({}, ${1:$(capitalize yas-text)}.mt)\n    $0\n    return self\nend\n\nreturn ${1:$(capitalize yas-text)}"</span> <span class="org-string">"class"</span>)

     <span class="org-comment-delimiter">;; </span><span class="org-comment">For loop
</span>     (<span class="org-string">"for"</span> <span class="org-string">"for ${1:i} = ${2:1}, ${3:10} do\n    $0\nend"</span> <span class="org-string">"for loop"</span>)

     <span class="org-comment-delimiter">;; </span><span class="org-comment">For in loop
</span>     (<span class="org-string">"fori"</span> <span class="org-string">"for ${1:k}, ${2:v} in ${3:pairs}(${4:table}) do\n    $0\nend"</span> <span class="org-string">"for in loop"</span>)

     <span class="org-comment-delimiter">;; </span><span class="org-comment">Require
</span>     (<span class="org-string">"req"</span> <span class="org-string">"local ${1:module} = require('</span><span class="org-string"><span class="org-constant">${2:module}</span></span><span class="org-string">')"</span> <span class="org-string">"require"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdfd0d16" class="outline-2">
<h2 id="orgdfd0d16"><span class="section-number-2">9.</span> Keybindings Summary</h2>
<div class="outline-text-2" id="text-9">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keybinding</th>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>C-c C-d</code></td>
<td class="org-left">lua-search-documentation</td>
<td class="org-left">Search Lua documentation</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-r</code></td>
<td class="org-left">lua-send-region</td>
<td class="org-left">Send region to Lua REPL</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-l</code></td>
<td class="org-left">lua-send-buffer</td>
<td class="org-left">Send entire buffer to REPL</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-c</code></td>
<td class="org-left">lua-send-current-line</td>
<td class="org-left">Send current line to REPL</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-z</code></td>
<td class="org-left">my/lua-start-repl</td>
<td class="org-left">Start/switch to Lua REPL</td>
</tr>

<tr>
<td class="org-left"><code>C-c C-f</code></td>
<td class="org-left">lua-stylua-buffer</td>
<td class="org-left">Format buffer with stylua</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org14c8b10" class="outline-2">
<h2 id="org14c8b10"><span class="section-number-2">10.</span> Installation Requirements</h2>
<div class="outline-text-2" id="text-10">
<p>
To get the most out of this configuration, install:
</p>

<ol class="org-ol">
<li><p>
<b><b>lua-language-server</b></b>: For LSP support
</p>
<div class="org-src-container">
<pre class="src src-bash"><span class="org-comment-delimiter"># </span><span class="org-comment">macOS with Homebrew
</span>brew install lua-language-server

<span class="org-comment-delimiter"># </span><span class="org-comment">Or build from source
</span>git clone https://github.com/sumneko/lua-language-server
<span class="org-builtin">cd</span> lua-language-server
git submodule update --init --recursive
<span class="org-builtin">cd</span> 3rd/luamake
./compile.sh
<span class="org-builtin">cd</span> ../..
./3rd/luamake/luamake rebuild
</pre>
</div></li>

<li><p>
<b><b>stylua</b></b>: For code formatting
</p>
<div class="org-src-container">
<pre class="src src-bash"><span class="org-comment-delimiter"># </span><span class="org-comment">Using cargo
</span>cargo install stylua

<span class="org-comment-delimiter"># </span><span class="org-comment">Or download binary from GitHub releases</span>
</pre>
</div></li>

<li><p>
<b><b>Love2D</b></b> (optional): For game development
</p>
<div class="org-src-container">
<pre class="src src-bash"><span class="org-comment-delimiter"># </span><span class="org-comment">macOS
</span>brew install --cask love

<span class="org-comment-delimiter"># </span><span class="org-comment">Linux
</span>sudo apt install love
</pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-orgb03989f" class="outline-2">
<h2 id="orgb03989f"><span class="section-number-2">11.</span> End of Configuration</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">provide</span> '<span class="org-constant">prog-lua-conf</span>)
<span class="org-comment-delimiter">;;; </span><span class="org-comment">prog-lua-conf.el ends here</span>
</pre>
</div>
</div>
</div>
</main>
<footer id="postamble" class="status">
<p class="date">Date: 2025-12-01</p>
</footer>
</body>
</html>
